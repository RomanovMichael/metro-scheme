(function(){"use strict";var t={4986:function(t,e,r){var n=r(7195),a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app",attrs:{id:"app"}},[e("AppMenu"),e("AppMap")],1)},o=[],s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-map",attrs:{id:"map"}})},i=[],c=r(6158),p=r.n(c),u={name:"AppMap",props:{msg:String},data(){return{accessToken:"pk.eyJ1Ijoicm9tYW5vdjEiLCJhIjoiY2xqbjJtNWMyMWMzZzNxazJjemh5bmxreiJ9.l3GIkp0IhuNqHbmwN3W-zw",map:null,myPoints:{type:"geojson",data:{type:"FeatureCollection",features:[]}}}},watch:{"$store.state.search":function(){this.map.setFilter("points",["in",this.$store.state.search.toLowerCase(),["get","name"]])}},computed:{arrayStations(){return this.$store.getters["getStationsWithBranchColor"]}},methods:{trimArray(){this.map.setFilter("points",["in","bal",["get","name"]])},initMap(){p().accessToken=this.accessToken,this.map=new(p().Map)({container:"map",style:"mapbox://styles/mapbox/dark-v10",center:[37.617698,55.755864],zoom:11,projection:"globe"})}},async mounted(){await this.$store.dispatch("getBranches"),this.myPoints.data.features=this.arrayStations,this.initMap(),this.map.on("load",(async()=>{this.map.setFog({}),this.map.addSource("points",this.myPoints),this.map.addLayer({id:"points",type:"circle",source:"points",layout:{},paint:{"circle-color":["get","color"],"circle-radius":10}})}))},unmounted(){this.map.remove(),this.map=null}},l=u,m=r(1001),h=(0,m.Z)(l,s,i,!1,null,null,null),f=h.exports,d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app-menu"},[e("div",{staticClass:"app-menu__search-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filterValue,expression:"filterValue"}],staticClass:"app-menu__search",attrs:{type:"text"},domProps:{value:t.filterValue},on:{input:function(e){e.target.composing||(t.filterValue=e.target.value)}}})]),t.stations?e("div",{staticClass:"app-menu__list"},t._l(t.stations,(function(r,n){return e("div",{key:n,staticClass:"app-menu__item"},[e("div",{staticClass:"app-menu__item-thumb",style:{backgroundColor:r.properties.color}}),r.properties.name?e("div",{staticClass:"app-menu__item-title",domProps:{innerHTML:t._s(r.properties.name)}}):t._e()])})),0):t._e()])},v=[],g={name:"AppMenu",props:{msg:String},data(){return{fdfsf:"dfdsf",filterValue:"",myStations:[]}},watch:{filterValue:{handler(){this.$store.commit("UPDATE_SEARCH",this.filterValue)}}},computed:{stations(){return this.$store.getters["getStationsWithBranchColor"]}}},y=g,_=(0,m.Z)(y,d,v,!1,null,null,null),b=_.exports,C={name:"App",components:{AppMap:f,AppMenu:b}},w=C,A=(0,m.Z)(w,a,o,!1,null,null,null),P=A.exports,x=r(408);n.ZP.use(x.ZP);var j=new x.ZP.Store({state:{branches:null,enableFilter:!1,search:""},actions:{async getBranches({commit:t}){return new Promise(((e,r)=>{fetch("./content/branches.json").then((t=>t.json())).then((r=>{t("UPDATE_BRANCHES",r),e()})).catch((t=>{console.error("Error:",t),r()}))}))}},mutations:{UPDATE_BRANCHES(t,e){t.branches=e},UPDATE_SEARCH(t,e){t.search=e}},getters:{getStationsWithBranchColor(t){if(null==t.branches)return;const e=t.branches.reduce(((t,e)=>{const r=e.stations.map((t=>{let r={type:"Feature",properties:{color:`#${e.hex_color}`,order:t.order,name:t.name,admArea:t.admArea,district:t.district,status:t.status},geometry:{coordinates:[t.lng,t.lat],type:"Point"}};return r}));return t.concat(r)}),[]),r=e.filter((e=>e.properties.name.toLowerCase().includes(t.search.toLowerCase()))),n=function(n){n=""!==t.search?r:e;const a=n.sort(((t,e)=>t.properties.name.toLowerCase()<e.properties.name.toLowerCase()?-1:t.properties.name.toLowerCase()>e.properties.name.toLowerCase()?1:0));return a};return n()}}});n.ZP.config.productionTip=!1,new n.ZP({store:j,render:t=>t(P)}).$mount("#app")}},e={};function r(n){var a=e[n];if(void 0!==a)return a.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.m=t,function(){var t=[];r.O=function(e,n,a,o){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],o=t[u][2];for(var i=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(r.O).every((function(t){return r.O[t](n[c])}))?n.splice(c--,1):(i=!1,o<s&&(s=o));if(i){t.splice(u--,1);var p=a();void 0!==p&&(e=p)}}return e}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[n,a,o]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,o,s=n[0],i=n[1],c=n[2],p=0;if(s.some((function(e){return 0!==t[e]}))){for(a in i)r.o(i,a)&&(r.m[a]=i[a]);if(c)var u=c(r)}for(e&&e(n);p<s.length;p++)o=s[p],r.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return r.O(u)},n=self["webpackChunkmetro"]=self["webpackChunkmetro"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(4986)}));n=r.O(n)})();
//# sourceMappingURL=app.f6263252.js.map